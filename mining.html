<!DOCTYPE html>
<html>
<head>
  <title>Happie Monero Miner</title>
  <script src="https://authedmine.com/lib/authedmine.min.js"></script>
  <script src="https://unpkg.com/vue"></script>
</head>
<body>
  <div id="app">
    <h1>Happie Monero Miner</h1>
    <p>Heads up! Your adblocker is going to <i>hate</i> this. Make sure it's disabled or the site won't run!</p>
    <div class="username-block">
      <input id="username" type="text" v-model="username" placeholder="Username" :disabled="minerIsRunning">
      <label for="username">Username should be first name, last initial. ex: adamt</label>
    </div>
    <button v-show="!minerIsRunning" @click="startMining">Start Mining!</button>
    <button v-show="minerIsRunning" @click="stopMining">Stop Mining!</button>
    <div class="stats" v-if="miner.isRunning">
      <div>Hashes per second: {{ miner.getHashesPerSecond() }}</div>
      <div>Hashes solved: {{ miner.getTotalHashes([true]) }}</div>
      <div>Total accepted hashes: {{ miner.getAcceptedHashes() }}</div>
    </div>
  </div>
  
  <style>
    html {
      padding: 15px;
    }
    .username-block {
      display: block;
      margin: 15px 0;
    }
    .stats {
      font-family: monospace;
      margin-top: 100px;
    }
  </style>
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        username: null,
        miner: {},
        minerIsRunning: false
      },
      mounted () {
      },
      methods: {
        startMining () {
          if (this.username) {
          this.miner = new CoinHive.User('xCMPcwmATQcc8DfGnAAPxOrwqqd6xlOV', this.username, {
          	throttle: 0.5,
          })
          this.miner.start(CoinHive.IF_EXCLUSIVE_TAB)
          this.minerIsRunning = true
        } else {
          alert("Hey! Make sure you enter a username before you start mining!")
        }
      },
      stopMining () {
        this.miner.stop()
        this.minerIsRunning = false
      }
      }
    })
  </script>
</body>
</html>
